---
title: "R Notebook"
output: html_notebook
---

```{r}
library(ggplot2)
```

### Start with qplot
```{r}
str(mpg)

qplot(displ, hwy, data = mpg)
```

Now suppose we want to do the same plot but this time use different colors to distinguish between the 3 factors (subsets) of different types of drive (drv) in the data (front-wheel, rear-wheel, and 4-wheel)

```{r}
qplot(displ, hwy, data = mpg, color = drv)
```

Now let's add a second geom to the default points. How about some smoothing function to produce trend lines, one for each color?

```{r}
qplot(displ, hwy, data = mpg, color = drv, geom = c("point", "smooth"))

```

So, specifying the y parameter only, without an x argument, plots the values of the y argument in the order in which they occur in the data.

```{r}
qplot(drv, hwy, data = mpg, geom = "boxplot")
```


```{r}
qplot(drv, hwy, data = mpg, geom = "boxplot", color = manufacturer)

```

```{r}
qplot(hwy, data = mpg, fill = drv)
```

Remember that with base plot we had to do each subplot individually. The lattice system made plotting conditioning plots easier. Let's see how easy it is with qplot.

```{r}
qplot(displ, hwy, data = mpg, facets =. ~ drv)
```

This shows us more detailed information than the histogram. We see the relationship between displacement and highway mileage for each of the 3 drive factors.

```{r}
qplot(hwy, data = mpg, facets = drv ~ ., binwidth = 2)

```

 A "grammar" of graphics means that ggplot2 contains building blocks with which you can create your own graphical objects. What are these basic components of ggplot2 plots? There are 7 of them.
 
Obviously, there's a DATA FRAME which contains the data you're trying to plot. Then the AESTHETIC MAPPINGS determine how data are mapped to color, size, etc. The GEOMS (geometric objects) are what you see in the plot (points, lines, shapes) and FACETS are the panels used in conditional plots. You've used these or seen them used in the first ggplot2 (qplot) lesson.

STATS are statistical transformations such as binning, quantiles, and smoothing which ggplot2 applies to the data. SCALES show what coding an aesthetic map uses (for example, male = red, female = blue). Finally, the plots are depicted on a COORDINATE SYSTEM. When you use qplot these were taken care of for you.

```{r}
qplot(displ, hwy, data = mpg, geom = c("point", "smooth"), facets = . ~ drv)
```

```{r}
g <- ggplot(data = mpg, aes(x = displ, y = hwy))

summary(g)
```


```{r}
g + geom_point()
```

```{r}
g + geom_point() + geom_smooth()

```



```{r}
g + geom_point() + geom_smooth(method = "lm")

```



```{r}
g + geom_point() + geom_smooth(method = "lm") + facet_grid(. ~ drv)

```


```{r}
g + geom_point() + geom_smooth(method = "lm") + facet_grid(. ~ drv) +
    ggtitle("Swirl Rules!")

```

```{r}
g + geom_point(color = "pink", size = 4, alpha = 1/2)
```


```{r}
g + geom_point(aes(color = drv)) + 
    labs(title = "Swirl Rules!") + 
    labs(x="Displacement", y = "Hwy Mileage")

```


```{r}
g + geom_point(aes(color = drv), size = 2, alpha = 1/2) +
    geom_smooth(size = 4, linetype = 3, method = "lm", se = FALSE)
```


```{r}
g + geom_point(aes(color = drv)) +
    theme_bw(base_family = "Times")
```


```{r}
 plot(myx, myy, type = "l", ylim = c(-3, 3))
```

 Notice how plot plotted the points in the (-3,3) range for y-values. The outlier at (50,100) is NOT shown on the line plot. Now we'll plot the same data with ggplot. Recall that the name of the dataframe is testdat. Create the graphical object g with a call to ggplot with 2 arguments, testdat (the data) and a call to aes with 2 arguments, x set equal to myx, and y set equal to myy.
 
```{r}
g <- ggplot(data = testdat, aes(x = myx, y = myy))


g + geom_line()
```
 
Notice how ggplot DID display the outlier point at (50,100). As a result the rest of the data is smashed down so you don't get to see what the bulk of it looks like. The single outlier probably isn't important enough to dominate the graph. How do we get ggplot to behave more like plot in a situation like this?

```{r}
g + geom_line() + ylim(-3, 3)
```

Notice that by doing this, ggplot simply ignored the outlier point at (50,100). There's a break in the line which isn't very noticeable.

```{r}
g + geom_line() + coord_cartesian(ylim = c(-3, 3))
```


```{r}
g <- ggplot(data = mpg, aes(x = displ, y = hwy, color = factor(year)))
```

```{r}
g + geom_point()
```

```{r}
g + geom_point() +facet_grid(drv ~ cyl, margins = TRUE)

```

A 4 by 5 plot, huh? The margins argument tells ggplot to display the marginal totals over each row and column, so instead of seeing 3 rows (the number of drv factors) and 4 columns (the number of cyl factors) we see a 4 by 5 display. Note that the panel in position (4,5) is a tiny version of the scatterplot of the entire dataset.



```{r}
g + geom_point() +facet_grid(drv ~ cyl, margins = TRUE) +
    geom_smooth(method = "lm", se = FALSE, size = 2, color = "black")
```



```{r}
g + geom_point() +facet_grid(drv ~ cyl, margins = TRUE) +
    geom_smooth(method = "lm", se = FALSE, size = 2, color = "black") + labs(x = "Displacement", y = "Highway Mileage", title = "Swirl Rules!")
```












