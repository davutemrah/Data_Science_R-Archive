---
title: "R Notebook"
output: html_notebook
---

## ggplot2 Package

* gramer of graphics
* Written by Hadley wickham

```{r}
if (!require(ggplot2)) install.packages('ggplot2')
library(ggplot2)
```

plots are made up of aesthetics (size, shape, color) and geoms (points, lines)

Factor variables are important; they should be labeled informatively

#### Basic plot: qplot()

```{r}
str(mpg)
```
```{r}
qplot(x = displ, y = hwy, data = mpg)
```
#### Variation on factor variable (by shape)

```{r}
qplot(x = displ, y = hwy, data = mpg, shape = drv)
```

#### Variation on factor variable (by colors)

```{r}
qplot(x = displ, y = hwy, data = mpg, color = drv)
```

#### Add a geom

```{r}
qplot(x = displ, y = hwy, data = mpg, geom = c("point", "smooth"))

qplot(sample = displ, data = mpg)

```

### histograms
```{r}
qplot(x = hwy, data = mpg, fill = drv)
```

### Facets

It is similar to panels in lattice plotting system

```{r}
qplot(x = displ, y = hwy, data = mpg, facets = .~drv)
```

```{r}
qplot(x = hwy, data = mpg, facets = drv ~., binwidth = 2)
```

```{r}
qplot(x = hwy, data = mpg, geom = "density")
```

```{r}
qplot(x = hwy, data = mpg, geom = "density", color = factor(cyl))
```

#### Using geom_smooth--- linear regression

```{r}
qplot(x = displ, y = hwy, data = mpg, color = drv) +
    geom_smooth(method = "lm")

```

### separate out two groups (above graph)
```{r}
qplot(x = displ, y = hwy, data = mpg, facets = . ~ drv) +
    geom_smooth(method = "lm")

```


qplot(price, data=diamonds, binwidth = 18497/30)

qplot(price, data=diamonds, binwidth = 18497/30, fill = cut)

qplot(price, data=diamonds, geom = "density")

qplot(price, data=diamonds, geom = "density", color = cut)

qplot(x = carat, y=price, data = diamonds)

qplot(x = carat, y=price, data = diamonds, shape = cut)

qplot(x = carat, y=price, data = diamonds, color = cut)

qplot(carat,price,data=diamonds, color=cut) + geom_smooth(method="lm")

qplot(carat,price,data=diamonds, color=cut, facets=.~cut) + geom_smooth(method="lm")

g <- ggplot(data = diamonds, aes(depth, price))

g <- ggplot(data = diamonds, aes(depth, price))

cutpoints <- quantile(diamonds$carat,seq(0,1,length=4),na.rm=TRUE)

diamonds$car2 <- cut(diamonds$carat, cutpoints)

g <- ggplot(data = diamonds, aes(depth,price))


g + geom_point(alpha= 1/3) + facet_grid(cut ~ car2)

g + geom_point(alpha= 1/3) + facet_grid(cut ~ car2) + geom_smooth(method="lm", size=3, color="pink")

ggplot(diamonds,aes(carat,price))+geom_boxplot()+facet_grid(.~cut)

